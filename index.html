<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xBOARD Forums</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #05070a; color: white; font-family: system-ui, sans-serif; }
        nav { background: #12161d; border-bottom: 2px solid #afe7fa; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; }
        .logo-section { display: flex; gap: 15px; align-items: center; }
        .logo { font-weight: bold; font-size: 1.5rem; color: #afe7fa; text-decoration: none; }
        .admin-btn { background: #e74c3c; color: white; padding: 8px 16px; border-radius: 4px; font-size: 0.85rem; font-weight: bold; text-decoration: none; display: none; }
        .user-section { display: flex; gap: 15px; align-items: center; }
        .user-display { font-size: 0.9rem; color: #6d7c90; }
        .login-btn { background: transparent; border: 1px solid #afe7fa; color: #afe7fa; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-weight: bold; }
        .container { max-width: 1100px; margin: 20px auto; padding: 0 15px; }
        .category-header { background: #16202e; border-left: 4px solid #afe7fa; color: #afe7fa; padding: 12px 15px; font-weight: bold; text-transform: uppercase; font-size: 0.9rem; margin-top: 30px; }
        .forum-table { width: 100%; background: #12161d; border-collapse: collapse; border: 1px solid #1e2530; }
        .forum-row td { padding: 20px; border-bottom: 1px solid #1e2530; }
        .forum-row:hover td { background: rgba(175, 231, 250, 0.05); }
        .forum-title { color: #afe7fa; text-decoration: none; font-weight: bold; font-size: 1.1rem; display: block; margin-bottom: 5px; }
        .forum-description { color: #6d7c90; font-size: 0.9rem; }
    </style>
</head>
<body>
    <nav>
        <div class="logo-section">
            <a href="index.html" class="logo">xBOARD</a>
            <a href="admin_dashboard.html" id="admin-link" class="admin-btn">ADMIN</a>
        </div>
        <div class="user-section">
            <span id="user-display" class="user-display">Loading...</span>
            <button id="auth-btn" class="login-btn" disabled>Loading...</button>
        </div>
    </nav>

    <div class="container">
        <div class="category-header">General Discussions</div>
        <table class="forum-table">
            <tr class="forum-row">
                <td>
                    <a href="forum-community-lounge.html" class="forum-title">Community Lounge</a>
                    <div class="forum-description">Talk about anything and everything.</div>
                </td>
            </tr>
            <tr class="forum-row">
                <td>
                    <a href="forum-introductions.html" class="forum-title">Introductions</a>
                    <div class="forum-description">New here? Introduce yourself!</div>
                </td>
            </tr>
        </table>

        <div class="category-header">Development & Tech</div>
        <table class="forum-table">
            <tr class="forum-row">
                <td>
                    <a href="forum-coding-scripts.html" class="forum-title">Coding & Scripts</a>
                    <div class="forum-description">Share code projects and collaborate.</div>
                </td>
            </tr>
            <tr class="forum-row">
                <td>
                    <a href="forum-web-development.html" class="forum-title">Web Development</a>
                    <div class="forum-description">HTML, CSS, JavaScript, and frameworks.</div>
                </td>
            </tr>
        </table>

        <div class="category-header">Marketplace</div>
        <table class="forum-table">
            <tr class="forum-row">
                <td>
                    <a href="marketplace.html" class="forum-title">ðŸ›’ Marketplace</a>
                    <div class="forum-description">Buy, sell, and trade items.</div>
                </td>
            </tr>
        </table>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore, doc, getDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const app = initializeApp({
            apiKey: 'AIzaSyBTZmr8e_Gk9ltVEdVPOhI8Od9bD3tbrdA',
            authDomain: 'rebornforums.firebaseapp.com',
            projectId: 'rebornforums',
            storageBucket: 'rebornforums.firebasestorage.app',
            messagingSenderId: '499435360097',
            appId: '1:499435360097:web:c5c1fc54e4c37e784b7f20',
        });

        const auth = getAuth(app);
        const db = getFirestore(app);

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                const name = user.displayName || user.email?.split('@')[0] || 'User';
                document.getElementById('user-display').textContent = `Logged in as: ${name}`;
                document.getElementById('auth-btn').textContent = 'Logout';
                document.getElementById('auth-btn').disabled = false;
                document.getElementById('auth-btn').onclick = async () => {
                    await signOut(auth);
                    window.location.reload();
                };

                const userDoc = await getDoc(doc(db, "users", user.uid));
                if (userDoc.exists() && userDoc.data().role === "Admin") {
                    document.getElementById('admin-link').style.display = "inline-block";
                }
            } else {
                document.getElementById('user-display').textContent = 'Welcome, Guest';
                document.getElementById('auth-btn').textContent = 'Login / Sign Up';
                document.getElementById('auth-btn').disabled = false;
                document.getElementById('auth-btn').onclick = () => window.location.href = 'login.html';
            }
        });
    </script>
</body>
</html>
